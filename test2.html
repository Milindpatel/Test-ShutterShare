<!DOCTYPE HTML>

<html>
	<head>
		<title>Test 2</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="subpage">

		<!-- Header -->
			<header id="header">
				<div class="inner">
					<a href="index.html" class="logo"><strong>Test 2</strong></a>
					<nav id="nav">
						<a href="index.html">Home</a>
						<a href="test1.html">Test 1</a>
					</nav>
					<a href="#navPanel" class="navPanelToggle"><span class="fa fa-bars"></span></a>
				</div>	
			</header>

		<!-- Main -->
			<section id="main" class="wrapper">
				<div class="inner">

					<h3>Enter the value</h3>

					<form action="#" method="post">
					
						<div class="field">
							<textarea name="test2Text" id="test2Text" rows="6" placeholder="Enter the value"></textarea>
						</div>
						<ul class="actions">
								<li><button onclick="check()" class="button" type="button">Output</button></li>
						</ul>
					</form>

					<h3 id="outputTest2">Output will appear here</h3>				

				</div>
			</section>

		
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

			<script>
			function check() {


					var val = document.getElementById('test2Text').value;

					var buy = 0;
					var sell = 0;
					var nb = 0;
					var sb = "";

					var orderArrays = val.split(",");
					for (order of orderArrays)
					{
						order = order.trim();
						var orderSplit = order.split(" ");

							/** orderSplit[0].indexOf(' ') >= 0) = false if string has not whitespace
								(orderSplit[1].indexOf('.') === -1) = true if string does not have dot(period)
							**/

							 console.log( !(orderSplit[0].indexOf(' ') >= 0) && orderSplit[1].indexOf('.') === -1 && orderSplit[2].indexOf('.') !== -1 &&  (orderSplit[3] == "B" || orderSplit[3] == "S"))
						
								if( !(orderSplit[0].indexOf(' ') >= 0) && orderSplit[1].indexOf('.') === -1 && orderSplit[2].indexOf('.') !== -1 &&  (orderSplit[3] == "B" || orderSplit[3] == "S")){
									if(orderSplit[3] == "B"){
										buy = Number(orderSplit[1]) *  Number(orderSplit[2]) + buy;
									} else if (orderSplit[3] == "S"){
										sell = Number(orderSplit[1]) *  Number(orderSplit[2]) + sell;
									}
								}else{
									nb++;
									if(nb == 1){
									}
									sb =  sb + order + " ;";
								}
													
					}

					document.getElementById('outputTest2').innerText = "Buy: " + buy + " Sell: " + sell+ "; Badly formed " + nb + ": " + sb

				}
			</script>

	</body>
</html>